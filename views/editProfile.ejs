<%- include("templates/header") %>
<div class="p-2 mt-2 d-flex justify-content-center">
  <form action="/editProfile/upload?type=profile&username=<%- name %>" method="post" enctype="multipart/form-data" class="">
    <div class="mb-3">
      <label for="inputUsername" class="form-label">Edit Username</label>
      <input type="text" class="form-control" value="<%- name %>" name="username" id="inputUsername">
    </div>
    <div class="mb-3">
      <label for="inputEmail" class="form-label">Edit Email</label>
      <input type="email" class="form-control" value="<%- email %>" name="email" id="inputEmail">
    </div>
    <div class="mb-3">
      <label for="formFile" class="form-label">Edit Profile Picture:</label>
      <input class="form-control" type="file" name="image" id="formFile">
    </div>
    <button type="submit" class="btn btn-primary mb-3">Save Edits</button>
  </form>
</div>
<script>
  let geoUpdated = false;

  async function captureGeo() {
    let updateGeoButton = document.getElementById("updateGeoButton");
    updateGeoButton.textContent = "Updating...";

    navigator.geolocation.getCurrentPosition((position) => {

      let formLong = document.getElementById("long");
      let formLat = document.getElementById("lat");
      formLong.value = position.coords.longitude;
      formLat.value = position.coords.latitude;
      formLong.hidden = false;
      formLat.hidden = false;
      formLong.disabled = false;
      formLat.disabled = false;
      updateGeoButton.textContent = "Update Location?";
      geoUpdated = true;
    }, (err => {
      updateGeoButton.textContent = "Try again?";
    }), {
      timeout: 10000
    });
  }
</script>
<%- include("templates/footer") %>